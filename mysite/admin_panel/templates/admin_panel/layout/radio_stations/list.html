{% extends "admin_panel/layout/base_dashboard.html" %}

{% comment %} {% block title %} Dashboard{% endblock %} {% endcomment %}



{% comment %} {% extends "base.html" %} {% endcomment %}


{% block content %}
<div class="container py-4">
  <h2 class="fw-bold mb-1">Radio Stations</h2>
  <p class="text-muted mb-4">Manage your radio station network</p>

  <!-- Top Metrics -->
  <div class="row g-3 mb-4">
    <div class="col-md-4">
      <div class="card shadow-sm border-0 rounded-4 p-3">
        <h6 class="text-muted mb-1">Total Stations</h6>
        <h3 class="fw-bold">{{ total_stations }}</h3>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm border-0 rounded-4 p-3">
        <h6 class="text-muted mb-1">Active Stations</h6>
        <h3 class="fw-bold text-primary">{{ active_stations }}</h3>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm border-0 rounded-4 p-3">
        <h6 class="text-muted mb-1">Markets</h6>
        <h3 class="fw-bold text-warning">{{ total_markets }}</h3>
      </div>
    </div>
  </div>



  <div class="row mb-3">
    <div class="col-md-8">
      <input type="text" 
             class="form-control" 
             placeholder="Search Radio Stations..." 
             name="q"
             hx-get="{% url 'list_radio_stations' %}"
             hx-trigger="keyup changed delay:500ms"
             hx-target="#stations-list"
             hx-push-url="true"
             value="{{ query }}">
    </div>
    <div class="col-md-4">
      <select class="form-select"
              name="status"
              hx-get="{% url 'list_radio_stations' %}"
              hx-trigger="change"
              hx-target="#stations-list"
              hx-push-url="true">
        <option value="">All Status</option>
        <option value="active" {% if status_filter == 'active' %}selected{% endif %}>Active</option>
        <option value="inactive" {% if status_filter == 'inactive' %}selected{% endif %}>Inactive</option>
      </select>
    </div>
  </div>

  <div id="stations-list">
    {% include 'admin_panel/layout/radio_stations/station_list_partial.html' %}
  </div>
</div>

<script src="https://unpkg.com/htmx.org@1.9.2"></script>

<script>
  {% if messages %}
    {% for message in messages %}
      toastr.options = {
        "closeButton": true,
        "progressBar": true,
        "timeOut": "3000",
        "positionClass": "toast-top-right"
      };
      toastr["{{ message.tags }}"]("{{ message }}");
    {% endfor %}
  {% endif %}
</script>

{% endblock %}

