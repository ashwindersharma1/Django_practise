<h5 class="fw-bold mb-2">All Radio Stations</h5>
<p class="text-muted mb-4">Manage and configure your radio station network</p>

{% for station in page_obj %}
<div class="d-flex justify-content-between align-items-start mb-3 pb-2 border-bottom">
  <div>
    <h6 class="fw-semibold mb-1">{{ station.name }}</h6>
    {% if station.is_active %}
      <span class="badge bg-success text-capitalize">active</span>
    {% else %}
      <span class="badge bg-secondary text-capitalize">inactive</span>
    {% endif %}

    <p class="mt-2 mb-0">
      <i class="bi bi-person-fill"></i> 
      Owner: {{ station.owner|default:"N/A" }} |
      <i class="bi bi-music-note-beamed"></i> {{ station.format.name|default:"N/A" }} |
      <i class="bi bi-geo-alt-fill"></i> {{ station.market.name|default:"N/A" }}
    </p>
  </div>

  <div class="d-flex align-items-center gap-2">
    <button class="btn btn-outline-primary btn-sm" id="view-{{station.uuid}}"  onclick="window.location.href='{% url 'view_radio_station' station.slug %}'""	>
      <i class="bi bi-eye"></i> View
    </button>
    <button class="btn btn-outline-warning btn-sm" id="edit-{{station.uuid }}">
      <i class="bi bi-pencil"></i> Edit
    </button>
    <button class="btn btn-outline-danger btn-sm" id="delete-{{ station.uuid }}">
      <i class="bi bi-trash"></i> Delete
    </button>
  </div>
</div>
{% empty %}
<p class="text-muted">No radio stations found.</p>
{% endfor %}


<!-- Pagination -->
<div class="d-flex justify-content-center mt-3 flex-wrap">
    {% if page_obj.paginator.num_pages > 1 %}
      {% if page_obj.has_previous %}
        <button 
          hx-get="?page={{ page_obj.previous_page_number }}&q={{ query }}&status={{ status_filter }}"
          hx-target="#stations-list"
          hx-swap="innerHTML"
          class="btn btn-light me-2">&laquo;</button>
      {% endif %}
  
      {% comment %} Always show at least 3 page numbers {% endcomment %}
      {% for num in page_obj.paginator.page_range %}
        {% if num >= page_obj.number|add:'-1' and num <= page_obj.number|add:'1' %}
          <button 
            hx-get="?page={{ num }}&q={{ query }}&status={{ status_filter }}"
            hx-target="#stations-list"
            hx-swap="innerHTML"
            class="btn {% if num == page_obj.number %}btn-primary{% else %}btn-light{% endif %} mx-1">
            {{ num }}
          </button>
        {% endif %}
      {% endfor %}
  
      {% if page_obj.paginator.num_pages > 3 %}
        {% if page_obj.number == 1 %}
          <button 
            hx-get="?page=3&q={{ query }}&status={{ status_filter }}"
            hx-target="#stations-list"
            hx-swap="innerHTML"
            class="btn btn-light mx-1">3</button>
        {% elif page_obj.number == page_obj.paginator.num_pages %}
          <button 
            hx-get="?page={{ page_obj.paginator.num_pages|add:'-2' }}&q={{ query }}&status={{ status_filter }}"
            hx-target="#stations-list"
            hx-swap="innerHTML"
            class="btn btn-light mx-1">{{ page_obj.paginator.num_pages|add:'-2' }}</button>
        {% endif %}
      {% endif %}
  
      {% if page_obj.has_next %}
        <button 
          hx-get="?page={{ page_obj.next_page_number }}&q={{ query }}&status={{ status_filter }}"
          hx-target="#stations-list"
          hx-swap="innerHTML"
          class="btn btn-light ms-2">&raquo;</button>
      {% endif %}
    {% endif %}
  </div>
  
  {% comment %} <script>
    $('button#view-{{station.uuid }}').click(function() {
      const station_uuid = $(this).attr('id');
      $(this).submit(function(e	 {)
        e.preventDefault();
        $.ajax({
          url: url('view_radio_station', station_uuid=station_uuid),
          type: 'GET',
          data: { station_uuid: station_uuid },
          success: function(response) {
            console.log(response);
          }
    });
  </script> {% endcomment %}